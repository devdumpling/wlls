---
import FruitsList from "../components/FruitsList.astro";
import Layout from "../layouts/Layout.astro";
import { validateBlogPosts } from "../utils/blogSchema";

// Get all MDX posts from the fruits directory
const rawPosts = Object.values(
	import.meta.glob("./fruits/*.mdx", { eager: true }),
);
const posts = validateBlogPosts(rawPosts);
---

<Layout title="Fruits - Dev Wells">
  <div class="min-h-screen px-phi-4 py-phi-6 max-w-[65ch] mx-auto">
    <main>
      <h1 class="text-3xl font-light tracking-tight mb-phi-4">Fruits</h1>
      {posts.length > 0 ? (
        <FruitsList posts={posts} />
      ) : (
        <div class="border-l-4 border-sage-200 dark:border-sage-800 pl-phi-4 py-phi-3">
          <p class="text-ink dark:text-ink-dark leading-relaxed">
            This space will grow with thoughts, technical posts, and
            reflections. For now, it's just soil waiting for the first seeds to
            sprout.
          </p>
        </div>
      )}

      <footer
        class="mt-phi-8 pt-phi-6 border-t border-sage-200 dark:border-sage-800"
      >
        <p class="text-sm text-bark-500 dark:text-bark-400 text-center italic">
          "The best time to plant a tree was 20 years ago. The second best time
          is now."
        </p>
      </footer>
    </main>
  </div>
</Layout>
